(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],h=0,u=[];h<o.length;h++)i=o[h],a[i]&&u.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==a[o]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},i={index:0},a={index:0},s=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-13e8543a":"77d4c33d","chunk-2c514c87":"407f42ad","chunk-2d0a3938":"42960eec","chunk-2d0bdce7":"9ef07de4","chunk-2d0c0629":"22cd7e0b","chunk-2d0e2114":"7ccfc5ac","chunk-2d0e5f4f":"60a2cd73","chunk-2d226c8c":"da408c78","chunk-2d229d4d":"b39937c6","chunk-7f9f7390":"04e7ec16","chunk-82ae8bd0":"3f5a4623","chunk-eda4aa94":"d5f4abc9","chunk-f6001110":"d10ca9c4"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-82ae8bd0":1,"chunk-eda4aa94":1,"chunk-f6001110":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-13e8543a":"31d6cfe0","chunk-2c514c87":"31d6cfe0","chunk-2d0a3938":"31d6cfe0","chunk-2d0bdce7":"31d6cfe0","chunk-2d0c0629":"31d6cfe0","chunk-2d0e2114":"31d6cfe0","chunk-2d0e5f4f":"31d6cfe0","chunk-2d226c8c":"31d6cfe0","chunk-2d229d4d":"31d6cfe0","chunk-7f9f7390":"31d6cfe0","chunk-82ae8bd0":"1244bdfd","chunk-eda4aa94":"86ab4d2e","chunk-f6001110":"94fc4035"}[e]+".css",a=l.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],h=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(h===r||h===a))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],h=c.getAttribute("data-href");if(h===r||h===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete i[e],p.parentNode.removeChild(p),n(s)},p.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){i[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=s);var c,h=document.createElement("script");h.charset="utf-8",h.timeout=120,l.nc&&h.setAttribute("nonce",l.nc),h.src=o(e),c=function(t){h.onerror=h.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");s.type=r,s.request=i,n[1](s)}a[e]=void 0}};var u=setTimeout(function(){c({type:"timeout",target:h})},12e4);h.onerror=h.onload=c,document.head.appendChild(h)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/xdh-map/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],h=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=h;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("c31f")},"1c44":function(e,t,n){},"2f27":function(e,t,n){"use strict";var r=n("a65b"),i=n.n(r);i.a},"42b1":function(e,t,n){"use strict";var r=n("880c"),i=n.n(r);i.a},"4c9c":function(e,t,n){},"880c":function(e,t,n){},a65b:function(e,t,n){},c31f:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},a=[],s={},o=s,l=(n("42b1"),n("2877")),c=Object(l["a"])(o,i,a,!1,null,null,null),h=c.exports,u=n("8c4f");r["a"].use(u["a"]);const p=new u["a"]({routes:[{path:"/",component:()=>n.e("chunk-82ae8bd0").then(n.bind(null,"694d")),children:[{path:"",component:()=>n.e("chunk-2d229d4d").then(n.bind(null,"deb8"))},{path:"text",component:()=>n.e("chunk-2d0bdce7").then(n.bind(null,"2e20"))},{path:"rectangle",component:()=>n.e("chunk-2d0e5f4f").then(n.bind(null,"9761"))},{path:"polygon",component:()=>n.e("chunk-2d0a3938").then(n.bind(null,"0387"))},{path:"circle",component:()=>n.e("chunk-2d226c8c").then(n.bind(null,"e9ac"))},{path:"line",component:()=>n.e("chunk-2c514c87").then(n.bind(null,"1105"))},{path:"pointer",component:()=>n.e("chunk-2d0c0629").then(n.bind(null,"420e"))},{path:"performance",component:()=>n.e("chunk-2d0e2114").then(n.bind(null,"7cb4"))},{path:"marker",component:()=>n.e("chunk-13e8543a").then(n.bind(null,"a30a"))},{path:"html",component:()=>n.e("chunk-f6001110").then(n.bind(null,"d53d"))},{path:"icon",component:()=>n.e("chunk-eda4aa94").then(n.bind(null,"7bf3"))},{path:"popup",component:()=>n.e("chunk-7f9f7390").then(n.bind(null,"4e2f"))}]}]});var d=p,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"map",staticClass:"xdh-map"},[e._t("default")],2)},f=[],y=n("5eee"),b=n("a2c7"),v=n("3e6b"),g=n("5831");const E={OSM:{title:"默认",server:null,preview:""},Baidu:{title:"百度地图",server:"http://online{index}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20170301&scaler=1&p=1",preview:""},Amap:{title:"高德地图",server:"http://webrd03.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}&lang=zh_cn",preview:""},SuperMap:{title:"超图",server:"http://53.1.238.17/iserver/services/map-pgisvec/rest/maps/pgisvecv1",preview:""},Google:{title:"谷歌地图",server:"http://172.19.40.108:8081/maptile/googlemaps/roadmap/{z}/{x}/{y}.png",preview:""},Founder:{title:"方正PGIS",server:"http://127.0.0.1:3000/proxy",preview:""}};function x(e){const t=Object.keys(E),n=t.includes(e);if(!n)throw new Error(`图层配置 ${e} 不存在`);return n}function w(e){Object.keys(e).forEach(t=>{const n=e[t];Object.assign(E[t],n)})}function S(e=null,t=!1){return e&&x(e)?E[e]:t?Object.keys(E).map(e=>{return{name:e,...E[e]}}):E}var k=n("480c"),O=n("d0e9"),_=n("2ef1"),I=n("78db"),j=n("6ed8"),T=n("d510"),N=n("91b1"),M=n("256f"),R=n("0af5"),$=n("345d"),C=n("089b");const P={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},A={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"};function G(e,t,n){let r=1/.0254,i=D(n),a=e*t*r*i;return a=1/a,a}function F(e,t,n){let r=1/.0254,i=this.getMeterPerMapUnit(n),a=e*t*r*i;return a=1/a,a}function D(e){let t,n=6378137;if(e===P.METER)t=1;else if(e===P.DEGREE)t=2*Math.PI*n/360;else if(e===P.KILOMETER)t=.001;else if(e===P.INCH)t=1/.025399999918;else{if(e!==P.FOOT)return t;t=.3048}return t}class L extends N["a"]{constructor(e){if(e=e||{},void 0===e.url)return;e.format=e.format?e.format:"png";let t=e.url+"/tileImage."+e.format+"?";e.serverType=e.serverType||A.ISERVER,super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:e.opaque,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:o,url:e.url,urls:e.urls,wrapX:void 0!==e.wrapX&&e.wrapX,cacheEnabled:e.cacheEnabled,layersID:e.layersID}),e.tileProxy&&(this.tileProxy=e.tileProxy),this.options=e,this._url=e.url,this.tileSetsIndex=-1,this.tempIndex=-1;let n=this;function r(){let t=this,n={};return n["redirect"]=void 0!==e.redirect&&e.redirect,n["transparent"]=void 0===e.transparent||e.transparent,n["cacheEnabled"]=!(!1===e.cacheEnabled),t.cacheEnabled=n["cacheEnabled"],n["_cache"]=n["cacheEnabled"],this.origin&&(n["origin"]=JSON.stringify({x:this.origin[0],y:this.origin[1]})),e.prjCoordSys&&(n["prjCoordSys"]=JSON.stringify(e.prjCoordSys)),e.layersID&&(n["layersID"]=e.layersID.toString()),e.overlapDisplayed?n["overlapDisplayed"]=!0:(n["overlapDisplayed"]=!1,e.overlapDisplayedOptions&&(n["overlapDisplayedOptions"]=t.overlapDisplayedOptions.toString())),e.cacheEnabled&&e.tileversion&&(n["tileversion"]=e.tileversion.toString()),n}function i(){return this._paramsChanged&&(this._layerUrl=a.call(this),this._paramsChanged=!1),this._layerUrl||a.call(this)}function a(){return this._layerUrl=t+encodeURI(s.call(this)),this._layerUrl}function s(){this.requestParams=this.requestParams||r.call(this);let e=[];for(let t in this.requestParams)e.push(t+"="+this.requestParams[t]);return e.join("&")}function o(t,r,a){n.tileGrid||(n.extent?(n.tileGrid=L.createTileGrid(e.extent),n.resolutions&&(n.tileGrid.resolutions=n.resolutions)):("EPSG:3857"===a.getCode()&&(n.tileGrid=L.createTileGrid([-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),n.extent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),"EPSG:4326"===a.getCode()&&(n.tileGrid=L.createTileGrid([-180,-90,180,90]),n.extent=[-180,-90,180,90]))),n.origin=n.tileGrid.getOrigin(0);let s=t[0],o=t[1],l=-t[2]-1,c=n.tileGrid.getResolution(s),h=96,u=a.getUnits();"degrees"===u&&(u=P.DEGREE),"m"===u&&(u=P.METER);let p=G(c,h,u),d=Object($["c"])(n.tileGrid.getTileSize(s,n.tmpSize)),m=i.call(n),f=m+encodeURI("&x="+o+"&y="+l+"&width="+d[0]+"&height="+d[1]+"&scale="+p);return n.tileProxy&&(f=n.tileProxy+encodeURIComponent(f)),n.cacheEnabled||(f+="&_t="+(new Date).getTime()),f}}setTileSetsInfo(e){this.tileSets=e,Array.isArray(this.tileSets)&&(this.tileSets=e[0]),this.tileSets&&(this.dispatchEvent({type:"tilesetsinfoloaded",value:{tileVersions:this.tileSets.tileVersions}}),this.changeTilesVersion())}lastTilesVersion(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()}nextTilesVersion(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()}changeTilesVersion(){let e=this;if(null==e.tileSets)return;if(e.tempIndex===e.tileSetsIndex||this.tempIndex<0)return;let t=e.tileSets.tileVersions;if(t&&e.tempIndex<t.length&&e.tempIndex>=0){let n=t[e.tempIndex].name,r=e.mergeTileVersionParam(n);r&&(e.tileSetsIndex=e.tempIndex,e.dispatchEvent({type:"tileversionschanged",value:{tileVersion:t[e.tempIndex]}}))}}updateCurrentTileSetsIndex(e){this.tempIndex=e}mergeTileVersionParam(e){return!!e&&(this.requestParams["tileversion"]=e,this._paramsChanged=!0,this.refresh(),!0)}static optionsFromMapJSON(e,t){let n={};n.url=e,n.crossOrigin="anonymous";let r=[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top],i=a();function a(){let e,n=17,i=96,a=r[2]-r[0],s=r[3]-r[1],o=a>=s?a:s;e=o===a?o/t.viewer.width:o/t.viewer.height;let l=[],c=P.METER;if(t.coordUnit===P.DEGREE&&(c=P.DEGREE),t.visibleScalesEnabled&&t.visibleScales&&t.visibleScales.length>0)for(let r=0;r<t.visibleScales.length;r++)l.push(F(t.visibleScales[r],i,c));else for(let t=0;t<n;t++)l.push(e/Math.pow(2,t));function h(e,t){return t-e}return l.sort(h)}return n.tileGrid=new I["a"]({extent:r,resolutions:i}),n}static createTileGrid(e,t,n,r,i){let a=Object(C["a"])({extent:e,maxZoom:t,minZoom:n,tileSize:r});return new I["a"]({extent:e,minZoom:n,origin:i,resolutions:a.getResolutions(),tileSize:a.getTileSize()})}}function z(e){const t=Object(M["c"])("EPSG:3857"),n=new I["a"]({origin:[0,0],resolutions:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18].map(function(e){return Math.pow(2,18-e)})});let r=new N["a"]({projection:t,tileGrid:n,tileUrlFunction:function(t){const n=t[0],r=t[1],i=t[2],a=Math.ceil(5*Math.random());return e.server.replace(/{x}/g,r).replace(/{y}/g,i).replace(/{z}/g,n).replace(/{index}/g,a)}});return new k["a"]({source:r})}function V(e){const t=256,n=Object(M["c"])("EPSG:4326"),r=n.getExtent(),i=Object(R["E"])(r)/t;let a=[],s=[];for(let c=0;c<=20;c++)a[c]=c,s[c]=i/Math.pow(2,c);const o=new j["b"]({origin:Object(R["C"])(r),resolutions:s,matrixIds:a}),l=e.server;return new k["a"]({source:new T["a"]({url:l,tileGrid:o,projection:n,tileLoadFunction:function(e,t){const n=e.tileCoord;let r=n[0],i=n[1],a=-(n[2]+1);e.getImage().src=`${l}?Service=getImage&Type=RGB&ZoomOffset=0&Col=${i}&Row=${a}&Zoom=${r}&V=0.3`}}),wrapX:!1})}function X(e="OSM"){if(!x(e))return null;const t=S(e);let n=null;switch(e){case"OSM":n=new k["a"]({source:new O["a"]});break;case"Google":case"Amap":n=new k["a"]({source:new _["a"]({url:t.server})});break;case"Baidu":n=z(t);break;case"SuperMap":n=new k["a"]({source:new L({url:t.server}),projection:"EPSG:4326"});break;case"Founder":n=V(t);break}return n}var B={name:"XdhMap",props:{minZoom:{type:Number,default:1},maxZoom:{type:Number,default:20},zoom:{type:Number,default:10},center:{type:Array,default(){return[120,30]}},type:{type:String,default:"OSM"},layerConfig:{type:Function,default(){return Promise.resolve({})}}},methods:{_eventHandler(e){const t=this.getFeatureAtPixel(e.pixel);if(t){const n=this._featureEvents[e.type]||[],r=n.find(e=>e.feature===t);r&&r.listener(e,r.feature)}},_bind(e,t,n,r){let i=this._featureEvents[e];i||(this._featureEvents[e]=[],this.map.on(e,this._eventHandler)),this._featureEvents[e].push({type:e,feature:t,listener:n,uid:r})},bindEvents(e){if(!this.map)return;const t=e.$listeners;Object.keys(t).forEach(n=>{this._bind(n,e.feature,t[n],e._uid)})},unbindEvents(e){if(!this.map)return;const t=e.$listeners,n=e._uid;Object.keys(t).forEach(e=>{const t=this._featureEvents[e]||[];t.splice(t.findIndex(e=>e.uid===n),1),0===t.length&&(delete this._featureEvents[e],this.map.un(e,this._eventHandler))})},addFeature(e){if(this.vectorLayer){const t=this.vectorLayer.getSource();t.addFeature(e)}else{let t=new g["a"]({features:[e]});this.vectorLayer=new v["a"]({source:t}),this.map.addLayer(this.vectorLayer)}},removeFeature(e){if(!this.vectorLayer)return;const t=this.vectorLayer.getSource();t.removeFeature(e)},getFeatureAtPixel(e){return this.map.forEachFeatureAtPixel(e,function(e){return e})},changeType(e){if(!e)return;const t=this.map.getLayers().getArray(),n=t.find(e=>"TILE"===e.type);n&&(this.map.removeLayer(n),n.disposeInternal()),this.map.addLayer(X(e))},resize(){this.map.updateSize()},zoomTo(e){const t=this.map.getView();t.animate({zoom:Number.parseInt(e)})},zoomIn(){const e=this.map.getView();this.zoomTo(e.getZoom()+1)},zoomOut(){const e=this.map.getView();this.zoomTo(e.getZoom()-1)},moveTo(e){const t=this.map.getView();t.animate({center:e})}},created(){this.isMap=!0,this._featureEvents={},this.layerConfig().then(e=>{w(e)})},mounted(){const e=X(this.type),t=new b["a"]({projection:"EPSG:4326",center:this.center,zoom:this.zoom,maxZoom:this.maxZoom,minZoom:this.minZoom});this.map=new y["a"]({layers:[e],target:this.$refs.map,view:t,controls:[]}),this.$emit("ready",this.map,this),Object.keys(this.$listeners).forEach(e=>{this.map.on(e,this.$listeners[e])})},beforeDestroy(){Object.keys(this.$listeners).forEach(e=>{this.map.un(e,this.$listeners[e])}),this.map&&this.map.disposeInternal()}},U=B,q=Object(l["a"])(U,m,f,!1,null,null,null),Z=q.exports;Z.install=function(e){e.component(Z.name,Z)};var H=Z,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xdh-map-text hidden"})},W=[],K=n("2c2d"),Y=n("a567"),Q=n("ce2c"),ee=n("83a6"),te=n("6cbf"),ne=n("ab77"),re=n("ab35"),ie=n("35d8"),ae=n("8682"),se=n("6c77"),oe=n("8295");const le={Atlas:K["a"],AtlasManager:Y["a"],Circle:Q["a"],Fill:ee["a"],Icon:te["a"],IconImage:ne["a"],Image:re["a"],RegularShape:ie["a"],Stroke:ae["a"],Style:se["b"],Text:oe["a"]};function ce(e){if(e&&e.className&&le[e.className]){let t={};return Object.keys(e).map(n=>{"className"!==n&&("object"===typeof e[n]&&e[n].className?t[n]=ce(e[n]):t[n]=e[n])}),new le[e.className](t)}}var he=n("f403"),ue=n("4cdf");const pe=[Array,String,Boolean,Object,Function];function de([e,...t],n=!1){return e.toUpperCase()+(n?t.join("").toLowerCase():t.join(""))}function me(e,t){let n={};return Object.keys(t).forEach(r=>{const i=e+de(r);n[i]=t[r]}),n}function fe(e,t){let n={};return Object.keys(t).forEach(t=>{n[t]=e+de(t)}),n}function ye(e,t,n){let r={},i=fe(t,n);return Object.keys(n).forEach(t=>{r[t]=e[i[t]]}),r}function be(){return ce({...this.baseStyleRender(),fill:{className:"Fill",color:this.fill},stroke:this.strokeRender(),text:this.textRender()})}function ve(){const e=Array.from(arguments).map(e=>e.props||{}),t=Object.assign({},...e),n=Object.create(null);return Object.entries(t).forEach(e=>{const t=e[0];n[t]=pe.includes(e[1])?{type:e[1]}:e[1]}),n}function ge(){let e=this.$parent;while(e&&!e.isMap)e=e.$parent;return e}function Ee(e){this.parent&&this.parent.map?e(this.parent.map,this.parent):this.parent.$once("ready",(t,n)=>{e(t,n)})}var xe={methods:{draw(){const e=this.createGeometry();this.feature=new ue["a"](e),this.setStyle(),this.feature._vm=this,this.parent&&(this.parent.addFeature(this.feature),this.parent.bindEvents(this)),this.$emit("draw",this.feature)},update(){if(!this.feature)return;const e=this.createGeometry();this.feature.setGeometry(e),this.$emit("update",this.feature)},setStyle(){const e=this.createStyle();this.feature&&this.feature.setStyle(e)},redraw(){this.update(),this.setStyle()}},created(){this.parent=ge.call(this)},mounted(){Ee.call(this,this.draw)},beforeDestroy(){this.parent&&this.feature&&(this.feature._vm=null,this.feature.disposeInternal(),this.parent.removeFeature(this.feature),this.parent.unbindEvents(this))}},we={props:{position:Array,zIndex:Number,fill:String},watch:{position:{deep:!0,handler(){this.update()}}},computed:{coordinate(){return this.position.map(e=>Number.parseFloat(e))}},methods:{baseStyleRender(){return{className:"Style",zIndex:this.zIndex,fill:this.fill}}}};const Se={color:{type:String,default:"transparent"},lineCap:String,lineJoin:String,lineDash:Array,lineDashOffset:Number,miterLimit:Number,width:Number},ke=me("stroke",Se);var Oe={props:{...ke},methods:{strokeRender(){return{className:"Stroke",...ye(this,"stroke",Se)}}}},_e={props:{text:String,color:String,font:String,background:{type:String,default:"transparent"}},computed:{fontWithFamily(){return`${this.font} sans-serif`}},watch:{text(){this.setStyle()}},methods:{textRender(){return{className:"Text",text:this.text,font:this.fontWithFamily,fill:{className:"Fill",color:this.color},backgroundFill:{className:"Fill",color:this.background}}}}},Ie={mounted(){this.$el&&this.$el.parentNode&&(this.$el.parentNode.removeChild(this.$el),this.$el=null)}},je=function(e){return{props:{...e},methods:{styleFactory(){let t={};return Object.keys(e).forEach(e=>{t[e]=this[e]}),t}}}};const Te={maxAngle:Number,offsetX:Number,offsetY:Number,overflow:Boolean,scale:Number,rotateWithView:Boolean,rotation:Number,textAlign:String,textBaseline:String,padding:Array},Ne=je(Te),Me={position:{type:Array,required:!0}},Re=ve(we,Oe,_e,Ne,{props:Me});var $e={name:"XdhMapText",mixins:[xe,we,Oe,_e,Ne,Ie],props:Re,methods:{createStyle(){return ce({...this.baseStyleRender(),text:{...this.textRender(),backgroundStroke:this.strokeRender(),...this.styleFactory()}})},createGeometry(){return new he["a"](this.coordinate)}}},Ce=$e,Pe=Object(l["a"])(Ce,J,W,!1,null,null,null),Ae=Pe.exports;Ae.install=function(e){e.component(Ae.name,Ae)};var Ge=Ae,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xdh-map-polygon",e._b({ref:"polygon",attrs:{coordinates:e.coords},on:{draw:e.handleDraw}},"xdh-map-polygon",e.$props,!1))},De=[],Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},ze=[],Ve=n("5bc3");const Xe={coordinates:{type:Array,default(){return[]}}},Be=ve({props:Xe},we,Oe,_e);delete Be.position;var Ue={name:"XdhMapPolygon",mixins:[xe,we,Oe,_e,Ie],props:Be,watch:{coordinates(){this.update()}},methods:{createStyle(){return be.call(this)},createGeometry(){return new Ve["a"]([this.coordinates])}}},qe=Ue,Ze=Object(l["a"])(qe,Le,ze,!1,null,null,null),He=Ze.exports;const Je={width:{type:Number,default:0,required:!0},height:{type:Number,default:0,required:!0}},We=ve({props:Je},He);delete We.coordinates;var Ke={name:"XdhMapRectangle",mixins:[Ie],components:{XdhMapPolygon:He},props:We,computed:{coords(){const e=(this.$attrs.position||[]).map(e=>Number.parseFloat(e));return[e,[e[0]+this.width,e[1]],[e[0]+this.width,e[1]-this.height],[e[0],e[1]-this.height],e]}},methods:{handleDraw(e){this.feature=e}}},Ye=Ke,Qe=Object(l["a"])(Ye,Fe,De,!1,null,null,null),et=Qe.exports;et.install=function(e){e.component(et.name,et)};var tt=et;Text.install=function(e){e.component(He.name,He)};var nt=He,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},it=[],at=n("f822");const st={radius:{type:Number,required:!0}},ot=ve({props:st},we,Oe,_e);var lt={name:"XdhMapCircle",mixins:[xe,we,Oe,_e,Ie],props:ot,watch:{radius(){this.update()}},methods:{createStyle(){return be.call(this)},createGeometry(){return new at["a"](this.coordinate,this.radius)}}},ct=lt,ht=Object(l["a"])(ct,rt,it,!1,null,null,null),ut=ht.exports;ut.install=function(e){e.component(ut.name,ut)};var pt=ut,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},mt=[],ft=n("7a09");const yt={coordinates:{type:Array,default(){return[]}},arrow:{type:String},arrowAnchor:{type:Array,default(){return[.75,.5]}},arrowEach:{type:Boolean}},bt=ve({props:yt},we,Oe,_e);delete bt.position;var vt={name:"XdhMapLine",mixins:[xe,we,Oe,_e,Ie],props:bt,watch:{coordinates(){this.update()}},methods:{arrowStyle(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=Math.atan2(r,n);return ce({className:"Style",geometry:new he["a"](t),image:{className:"Icon",src:this.arrow,anchor:this.arrowAnchor,rotateWithView:!0,rotation:-i}})},lastSegment(){const e=this.coordinates.length;if(e>=2)return this.arrowStyle(this.coordinates[e-2],this.coordinates[e-1])},createStyle(){const e=this.feature,t=e.getGeometry();let n=[be.call(this)];return this.arrow&&(this.arrowEach?t.forEachSegment((e,t)=>{n.push(this.arrowStyle(e,t))}):n.push(this.lastSegment())),n},createGeometry(){return new ft["a"](this.coordinates)}}},gt=vt,Et=Object(l["a"])(gt,dt,mt,!1,null,null,null),xt=Et.exports;xt.install=function(e){e.component(xt.name,xt)};var wt=xt,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xdh-map-placement",class:e.placement,style:e.styles},[e._t("default")],2)},kt=[],Ot={name:"placement",props:{placement:{type:String,default:"left-bottom",validator(e){return["left-top","center-top","right-top","left-center","center-center","right-center","left-bottom","center-bottom","right-bottom"].includes(e)}},zIndex:{type:Number,default:1},margin:{type:Array,default(){return[0,0,0,0]}}},computed:{styles(){return{zIndex:this.zIndex,margin:this.margin.map(e=>`${e}px`).join(" ")}}}},_t=Ot,It=Object(l["a"])(_t,St,kt,!1,null,null,null),jt=It.exports;jt.install=function(e){e.component(jt.name,jt)};var Tt=jt,Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xdh-map-placement",e._b({staticClass:"xdh-map-pointer"},"xdh-map-placement",e.$props,!1),[n("div",{ref:"btn",staticClass:"xdh-map-pointer__btn",class:{"is-lock":e.lock},attrs:{title:"点击复制"},on:{click:e.copy}},[e._v(e._s(e.coordinate.join(", "))+"\n  ")])])},Mt=[],Rt=n("b311"),$t=n.n(Rt);const Ct={precision:{type:Number,default:6}},Pt=ve({props:Ct},Tt);var At={name:"XdhMapPointer",components:{XdhMapPlacement:Tt},props:Pt,data(){return{coordinate:[0,0],lock:!1}},methods:{ready(e,t){this.coordinate=t.center,e.on("pointermove",this.move),e.on("click",this.pick),this.map=e},update(e){this.coordinate=e.coordinate.map(e=>e.toFixed(this.precision))},move(e){this.lock||this.update(e)},pick(e){this.lock=!0,this.update(e)},copy(){this.$emit("copy",this.coordinate),this.lock=!1}},created(){this.parent=ge.call(this)},mounted(){this.clipboard=new $t.a(this.$refs.btn,{text:e=>{return this.coordinate.join(", ")}}),this.clipboard.on("success",this.copy),Ee.call(this,this.ready)},beforeDestroy(){this.clipboard&&this.clipboard.destroy(),this.map&&(this.map.un("pointermove",this.move),this.map.un("click",this.pick))}},Gt=At,Ft=Object(l["a"])(Gt,Nt,Mt,!1,null,null,null),Dt=Ft.exports;Dt.install=function(e){e.component(Dt.name,Dt)};var Lt=Dt,zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Vt=[];const Xt={anchor:Array,crossOrigin:String,offset:Array,opacity:Number,scale:Number,rotateWithView:Boolean,rotation:Number,src:String},Bt=je(Xt),Ut=ve(we,Oe,_e,Bt);var qt={name:"XdhMapMarker",mixins:[xe,we,Oe,_e,Bt,Ie],props:Ut,watch:{radius(){this.update()}},methods:{createStyle(){return ce({...this.baseStyleRender(),image:{className:"Icon",...this.styleFactory()}})},createGeometry(){return new he["a"](this.coordinate)}}},Zt=qt,Ht=Object(l["a"])(Zt,zt,Vt,!1,null,null,null),Jt=Ht.exports;Jt.install=function(e){e.component(Jt.name,Jt)};var Wt=Jt,Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xdh-map-html"},[e._t("default")],2)},Yt=[],Qt=n("0710"),en={name:"XdhMapHtml",props:{positioning:{type:String,default:"center-center",validator(e){return["bottom-left","bottom-center","bottom-right","center-left","center-center","center-right","top-left","top-center","top-right"].includes(e)}},position:Array,offset:Array,stopEvent:{type:Boolean,default:!0},insertFirst:Boolean,className:String},watch:{position(){this.show()}},methods:{addOverlay(e){const t=this.$props;t.element=this.$el,this.overlay=new Qt["a"](t),e.addOverlay(this.overlay)},show(e){this.overlay&&this.overlay.setPosition(e||this.position)},hide(){this.overlay&&this.overlay.setPosition(null)}},created(){this.parent=ge.call(this),Ee.call(this,this.addOverlay)},beforeDestroy(){this.overlay&&this.parent&&this.parent.map.removeOverlay(this.overlay)}},tn=en,nn=Object(l["a"])(tn,Kt,Yt,!1,null,null,null),rn=nn.exports;rn.install=function(e){e.component(rn.name,rn)};var an=rn,sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xdh-map-html",{attrs:{position:e.position}},[n("i",e._g({class:e.icon},e.$listeners))])},on=[],ln={name:"XdhMapIcon",components:{XdhMapHtml:an},props:{position:Array,icon:String}},cn=ln,hn=Object(l["a"])(cn,sn,on,!1,null,null,null),un=hn.exports;un.install=function(e){e.component(un.name,un)};var pn=un,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("xdh-map-html",e._b({ref:"html",class:e.classes,style:e.styles,attrs:{positioning:"bottom-center"}},"xdh-map-html",e.$props,!1),[e.closable?n("i",{staticClass:"xdh-map-popup__close",on:{click:e.hide}}):e._e(),e.title?n("div",{staticClass:"xdh-map-popup__title"},[e._t("title"),n("i",{class:e.icon}),e._v(" "+e._s(e.title)+"\n  ")],2):e._e(),n("div",{staticClass:"xdh-map-popup__body"},[e._t("default")],2)])},mn=[],fn={name:"XdhMapPopup",components:{XdhMapHtml:an},props:{...an.props,width:String,height:String,title:{type:String},icon:{type:String},closable:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},theme:{type:String,default:"light",validator(){return["dark","light"]}}},computed:{classes(){return["xdh-map-popup",`is-${this.theme}`]},styles(){return{width:this.width,height:this.height}}},methods:{show(e){this.$refs.html.show(e||this.position)},hide(){this.$refs.html.hide()},ready(e){this.closeOnClick&&e.on("click",this.hide)}},created(){this.parent=ge.call(this),Ee.call(this,this.ready)},beforeDestroy(){this.closeOnClick&&this.parent.map.un("click",this.hide)}},yn=fn,bn=Object(l["a"])(yn,dn,mn,!1,null,null,null),vn=bn.exports;vn.install=function(e){e.component(vn.name,vn)};var gn=vn;n("1c44");const En=[H,Ge,tt,nt,pt,wt,Tt,Lt,Wt,an,pn,gn],xn=function(e){xn.installed||En.forEach(t=>e.component(t.name,t))};"undefined"!==typeof window&&window.Vue&&xn(window.Vue);var wn={install:xn,...En},Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"example"},[e._t("default")],2)},kn=[],On={},_n=On,In=(n("2f27"),Object(l["a"])(_n,Sn,kn,!1,null,"12380171",null)),jn=In.exports;n("4c9c");r["a"].use(wn),r["a"].component("Example",jn),r["a"].config.productionTip=!1,new r["a"]({router:d,render:e=>e(h)}).$mount("#app")}});
//# sourceMappingURL=index.3f1c8d16.js.map